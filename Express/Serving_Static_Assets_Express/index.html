Serving Static Files in Express:

- express.static is known as a middleware

- use an app.use which will run when any request is made, the
path doesn't matter

- middleware is something that just runs in between the request coming
in and the response going out

- app.use(express.static('public'))

- in express.static, we pass in an argument of the folder that
we want to serve our assets from

- the argument in the app.use example is 'public', we're saying we want
to use the directory called public, and this directory should be in the root
directory of our application

- he added the example app.use in the index.js in the same workspace as
all the EJS subreddit demos

- he added it after all the initial const variables

- he used the same 'public' directory, but you can use whatever name
you want

- he made a new directory/folder in the workspace called public

- then made a simple stylesheet called app.css in that directory

- in app.css do

body {
background-color: aquamarine;
}

- just so we can see it working adding this to our template

- now we need to refer to this stylesheet, he did it in the subreddit.ejs template

- to do this, he went to subreddit.ejs and added a link in the head with
href="/app.css"

- said we don't need to use "/public/app.css" because we're serving the
entire contents of the directory, and the directory itself won't be served
it's the contents of the directory

- if you had a css folder inside the directory, you would need to add
"/css/app.css" in the href

- now go to the browser and check if the background style was applied;
localhost:3000/r/chickens

- now, so we don't run into any issues, need to do the same as we did
with the views directory so it can always find the public directory

- go to index.js and make this the app.use

app.use(express.static(path.join(__dirname, 'public')))

- now go to the browser and verify that it works

- index.js currently looks like







const express = require('express');
const app = express();
const path = require('path');
const redditData = require('./data.json');

app.use(express.static(path.join(__dirname, 'public')))

app.set('view engine', 'ejs');
app.set('views', path.join(__dirname, '/views'))

app.get('/', (req, res) => {
res.render('home')
})

app.get('/cats', (req, res) => {
const cats = [
'Blue', 'Rocket', 'Monty', 'Stephanie', 'Winston'
]
res.render('cats', { cats })
})

app.get('/r/:subreddit', (req, res) => {
const { subreddit } = req.params;
const data = redditData[subreddit];
if (data) {
res.render('subreddit', { ...data });
} else {
res.render('notfound', { subreddit })
}
})

app.get('/rand', (req, res) => {
const num = Math.floor(Math.random() * 10) + 1;
res.render('random', { num })
})

app.listen(3000, () => {
console.log("LISTENING ON PORT 3000")
})






Now Adding Bootstrap to Express:

- going to make some changes to index.js

- see differnce between Bootstrap_Demo & Templating_Demo

- he went to bootstrap and downloaded the compiled files

- in the Bootstrap one, he made two directories inside the
public directory, css & js

- now he added the zip files bootstrap.min.css
& bootstrap.min.js from bootstrap into the css % js files

- now, working with the subreddit template, we need to change the
link href to "/css/bootstrap.min.css"

- because we are serving the public directory in index.js, so everything
in public is served, meaning the css & js folder, but then need to get
the files inside those folders

- now add the script to subreddit.ejs, script src="/js/bootstrap.min.js"

- right now, if you fire up the browser, youll see in the console that
bootstrap's JS will throw an error because it requires jQuery

- so he went to the jQuery website > downloaded jQuery, the compressed production
version > saved the file as jquery.js > then saved it into the js folder

- now need to add the script, and make sure it loads before the bootstrap js
script

- so before the bootstrapjs script, he added a script with the src="/js/jquery.js"

- should work now in the browser

- now he wants to add a navbar, he went to bootstrap website and just copy/paste the
navbar, he used a collapsing navbar with some links




<nav class="navbar navbar-expand-lg navbar-light bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Express Demo</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/rand">Random</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/r/chickens">Chickens</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/r/soccer">Soccer</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/r/mightyharvest">Mighty Harvest</a>
                </li>
            </ul>
        </div>
    </div>
</nav>




- he added this to the top of the subreddit.ejs template

- then go to the browser and see if it works, and check that
it's responsive

- added a / for the href in the home nav

- go to browser and click home link in the navbar and see if it takes
you to the home template we made

- notice the href's in the nav and click on them all in the localhost:3000
browser to see if they work






How to Get the Navbar on Every Page w/o having to copy and past on every page:

- EJS & Partials

- partials are a way of including templates in other templates

- first cut all of the head from the subreddit.ejs template



<!-- 

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= name %>
    </title>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script src="/js/jquery.js"></script>
    <script src="/js/bootstrap.min.js"></script>
</head> 

-->



- now move this all into a new template that we can use as our subtemplate
to use in all the templates

- start by making a new folder called partials in the views directory/folder,
then make a file head.ejs in the partials folder

- now we want to inlcude the head.ejs in the subreddit.ejs file

- the way that we do this is to use the ejs includes syntax

- go to the ejs website and look at includes

<!-- - you use <%- %> as the syntax with an include function in the middle  -->

- in the subreddit.ejs file, above the opening body tag, add

<!-- 

<%- include('partials/head') %>

 -->

- see if the bootstrap navbar is still on the page in the browser now

- now do the same thing with random.ejs

- it'll make an error because the title of random.ejs
is displaying the name

- for now, we either need to go into our route in index.js and include
a title for every single page, made the app.get('rand') this

<!-- 
     app.get('/rand', (req, res) => {
     const num = Math.floor(Math.random() * 10) + 1;
     res.render('randoom', { num, title: 'random' })
 }) 
-->

- or just add custom innerText as the title for each page, he did this
so as to not confuse people at this point

- now he went and included the head.ejs template in all the other
templates.

- the cat templates, the home, the notfound, etc.

- now let's duplicate the navbar so we can duplicate it in every Page

- so, let's make a template for the navbar. He cut the navbar from the
subreddit.ejs file and made a new template called navbar.ejs in the
partials directory. Then pasted the navbar html markup in the file

- now he included it in every tempate by adding this at the top of
every body of all the templates

<!-- 
    <%- include('partials/navbar')%>
 -->

- should have this navbar on every page in the browser now

- see the Bootstrap_Demo folder to see the finished code for this project